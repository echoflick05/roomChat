class EchoFlickClient{constructor(e,n,t="public"){if("public"!==t&&"private"!==t)throw Error('Invalid type. It must be "public" or "private".');this.url="ws://18.237.74.53:8080?public_key="+e+"&channel_id="+n+"&channel_type="+t,this.ws=null,this.onOpenCallback=null,this.onMessageCallback=null,this.onServerCallback=null,this.onCloseCallback=null,this.onErrorCallback=null,this.onClientInGroup=null,this.channelObject={type:"SEND_MESSAGE",groupName:null,fromChannelId:n,toChannelId:null,channelType:t,data:null,channelInfo:null}}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=()=>{this.onOpenCallback&&this.onOpenCallback()},this.ws.onmessage=e=>{let n;try{n=JSON.parse(e.data)}catch(t){n=structuredClone(this.channelObject)}n?.type==="GET_ACTIVE_CHANNELS"?this.onActiveChannelCallback&&this.onActiveChannelCallback(n):n?.type==="SERVER_RESPONSE"?this.onErrorCallback&&this.onErrorCallback(e.data):n?.type==="ON_CLIENT_IN_GROUP"?this.onClientInGroup&&this.onClientInGroup(n):this.onMessageCallback&&this.onMessageCallback(n)},this.ws.onclose=()=>{this.onCloseCallback&&this.onCloseCallback()},this.ws.onerror=e=>{this.onErrorCallback&&this.onErrorCallback(e)}}sendMessage(e,n,t="INDIVIDUAL"){if("INDIVIDUAL"!==t&&"GROUP"!==t)throw Error('Invalid type. It must be "INDIVIDUAL" or "GROUP".');if(this.ws&&this.ws.readyState===WebSocket.OPEN){let l=this.typeHandle(e),s=structuredClone(this.channelObject);s.data=l,s.toChannelId="GROUP"===t?null:n,s.groupName="GROUP"===t?n:null,this.ws.send(JSON.stringify(s))}else channelInfo,console.error("WebSocket is not open. Cannot send message.")}typeHandle(e){let n;switch(typeof e){case"object":Array.isArray(e),n=JSON.stringify(e);break;case"string":case"number":case"boolean":case"bigint":case"undefined":n=e;break;default:n=String(e)}return n}onOpen(e){this.onOpenCallback=e}onMessage(e){this.onMessageCallback=e}onServerResponse(e){this.onServerCallback=e}onActiveChannels(e){this.onActiveChannelCallback=e}onClose(e){this.onCloseCallback=e}onClientGroup(e){this.onClientInGroup=e}onError(e){this.onErrorCallback=e}getActiveChannels(e=null){let n=structuredClone(this.channelObject);n.type="GET_ACTIVE_CHANNELS",n.groupName=e,this.ws.send(JSON.stringify(n))}addGroup(e){let n=structuredClone(this.channelObject);n.type="ADD_GROUP",n.groupName=e,this.ws.send(JSON.stringify(n))}leaveGroup(e){let n=structuredClone(this.channelObject);n.type="LEAVE_GROUP",n.groupName=e,this.ws.send(JSON.stringify(n))}updateType(e){if("SEND_MESSAGE"!==e&&"GET_ACTIVE_CHANNELS"!==e)throw Error('Invalid type. It must be "GET_ACTIVE_CHANNELS" or "SEND_MESSAGE".');this.channelObject.type=e}updateChannelInfo(e){this.channelObject.channelInfo=e;let n=structuredClone(this.channelObject);n.type="UPDATE_INFO",this.ws.send(JSON.stringify(n))}}window.EchoFlickClient=EchoFlickClient;